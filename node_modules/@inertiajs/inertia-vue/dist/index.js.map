{"version":3,"file":"index.js","sources":["../src/link.js","../src/form.js","../src/head.js","../src/remember.js","../src/app.js"],"sourcesContent":["import { Inertia, mergeDataIntoQueryString, shouldIntercept } from '@inertiajs/inertia'\n\nexport default {\n  functional: true,\n  props: {\n    as: {\n      type: String,\n      default: 'a',\n    },\n    data: {\n      type: Object,\n      default: () => ({}),\n    },\n    href: {\n      type: String,\n      required: true,\n    },\n    method: {\n      type: String,\n      default: 'get',\n    },\n    replace: {\n      type: Boolean,\n      default: false,\n    },\n    preserveScroll: {\n      type: Boolean,\n      default: false,\n    },\n    preserveState: {\n      type: Boolean,\n      default: null,\n    },\n    only: {\n      type: Array,\n      default: () => [],\n    },\n    headers: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  render(h, { props, data, children }) {\n    data.on = {\n      click: () => ({}),\n      cancelToken: () => ({}),\n      start: () => ({}),\n      progress: () => ({}),\n      finish: () => ({}),\n      cancel: () => ({}),\n      success: () => ({}),\n      error: () => ({}),\n      ...(data.on || {}),\n    }\n\n    const as = props.as.toLowerCase()\n    const method = props.method.toLowerCase()\n    const [href, propsData] = mergeDataIntoQueryString(method, props.href, props.data)\n\n    if (as === 'a' && method !== 'get') {\n      console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes \"Open Link in New Tab/Window\" accessibility issues.\\n\\nPlease specify a more appropriate element using the \"as\" attribute. For example:\\n\\n<inertia-link href=\"${href}\" method=\"${method}\" as=\"button\">...</inertia-link>`)\n    }\n\n    return h(props.as, {\n      ...data,\n      attrs: {\n        ...data.attrs,\n        ...as === 'a' ? { href } : {},\n      },\n      on: {\n        ...data.on,\n        click: event => {\n          data.on.click(event)\n\n          if (shouldIntercept(event)) {\n            event.preventDefault()\n\n            Inertia.visit(href, {\n              data: propsData,\n              method: method,\n              replace: props.replace,\n              preserveScroll: props.preserveScroll,\n              preserveState: props.preserveState ?? (method !== 'get'),\n              only: props.only,\n              headers: props.headers,\n              onCancelToken: data.on.cancelToken,\n              onBefore: data.on.before,\n              onStart: data.on.start,\n              onProgress: data.on.progress,\n              onFinish: data.on.finish,\n              onCancel: data.on.cancel,\n              onSuccess: data.on.success,\n              onError: data.on.error,\n            })\n          }\n        },\n      },\n    }, children)\n  },\n}\n","import Vue from 'vue'\nimport isEqual from 'lodash.isequal'\nimport cloneDeep from 'lodash.clonedeep'\nimport { Inertia } from '@inertiajs/inertia'\n\nexport default function(...args) {\n  const rememberKey = typeof args[0] === 'string' ? args[0] : null\n  const data = (typeof args[0] === 'string' ? args[1] : args[0]) || {}\n  const restored = rememberKey ? Inertia.restore(rememberKey) : null\n  let defaults = cloneDeep(data)\n  let cancelToken = null\n  let recentlySuccessfulTimeoutId = null\n  let transform = data => data\n\n  const form = Vue.observable({\n    ...restored ? restored.data : data,\n    isDirty: false,\n    errors: restored ? restored.errors : {},\n    hasErrors: false,\n    processing: false,\n    progress: null,\n    wasSuccessful: false,\n    recentlySuccessful: false,\n    data() {\n      return Object\n        .keys(data)\n        .reduce((carry, key) => {\n          carry[key] = this[key]\n          return carry\n        }, {})\n    },\n    transform(callback) {\n      transform = callback\n\n      return this\n    },\n    reset(...fields) {\n      let clonedDefaults = cloneDeep(defaults)\n      if (fields.length === 0) {\n        Object.assign(this, clonedDefaults)\n      } else {\n        Object.assign(\n          this,\n          Object\n            .keys(clonedDefaults)\n            .filter(key => fields.includes(key))\n            .reduce((carry, key) => {\n              carry[key] = clonedDefaults[key]\n              return carry\n            }, {}),\n        )\n      }\n\n      return this\n    },\n    clearErrors(...fields) {\n      this.errors = Object\n        .keys(this.errors)\n        .reduce((carry, field) => ({\n          ...carry,\n          ...(fields.length > 0 && !fields.includes(field) ? { [field] : this.errors[field] } : {}),\n        }), {})\n\n      this.hasErrors = Object.keys(this.errors).length > 0\n\n      return this\n    },\n    submit(method, url, options = {}) {\n      const data = transform(this.data())\n      const _options = {\n        ...options,\n        onCancelToken: (token) => {\n          cancelToken = token\n\n          if (options.onCancelToken) {\n            return options.onCancelToken(token)\n          }\n        },\n        onBefore: visit => {\n          this.wasSuccessful = false\n          this.recentlySuccessful = false\n          clearTimeout(recentlySuccessfulTimeoutId)\n\n          if (options.onBefore) {\n            return options.onBefore(visit)\n          }\n        },\n        onStart: visit => {\n          this.processing = true\n\n          if (options.onStart) {\n            return options.onStart(visit)\n          }\n        },\n        onProgress: event => {\n          this.progress = event\n\n          if (options.onProgress) {\n            return options.onProgress(event)\n          }\n        },\n        onSuccess: async page => {\n          this.processing = false\n          this.progress = null\n          this.clearErrors()\n          this.wasSuccessful = true\n          this.recentlySuccessful = true\n          recentlySuccessfulTimeoutId = setTimeout(() => this.recentlySuccessful = false, 2000)\n\n          const onSuccess = options.onSuccess ? await options.onSuccess(page) : null\n          defaults = cloneDeep(this.data())\n          this.isDirty = false\n          return onSuccess\n        },\n        onError: errors => {\n          this.processing = false\n          this.progress = null\n          this.errors = errors\n          this.hasErrors = true\n\n          if (options.onError) {\n            return options.onError(errors)\n          }\n        },\n        onCancel: () => {\n          this.processing = false\n          this.progress = null\n\n          if (options.onCancel) {\n            return options.onCancel()\n          }\n        },\n        onFinish: () => {\n          this.processing = false\n          this.progress = null\n          cancelToken = null\n\n          if (options.onFinish) {\n            return options.onFinish()\n          }\n        },\n      }\n\n      if (method === 'delete') {\n        Inertia.delete(url, { ..._options, data  })\n      } else {\n        Inertia[method](url, data, _options)\n      }\n    },\n    get(url, options) {\n      this.submit('get', url, options)\n    },\n    post(url, options) {\n      this.submit('post', url, options)\n    },\n    put(url, options) {\n      this.submit('put', url, options)\n    },\n    patch(url, options) {\n      this.submit('patch', url, options)\n    },\n    delete(url, options) {\n      this.submit('delete', url, options)\n    },\n    cancel() {\n      if (cancelToken) {\n        cancelToken.cancel()\n      }\n    },\n    __rememberable: rememberKey === null,\n    __remember() {\n      return { data: this.data(), errors: this.errors }\n    },\n    __restore(restored) {\n      Object.assign(this, restored.data)\n      Object.assign(this.errors, restored.errors)\n      this.hasErrors = Object.keys(this.errors).length > 0\n    },\n  })\n\n  new Vue({\n    created() {\n      this.$watch(() => form, newValue => {\n        form.isDirty = !isEqual(form.data(), defaults)\n        if (rememberKey) {\n          Inertia.remember(newValue.__remember(), rememberKey)\n        }\n      }, { immediate: true, deep: true })\n    },\n  })\n\n  return form\n}\n","export default {\n  props: {\n    title: {\n      type: String,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      provider: this.$headManager.createProvider(),\n    }\n  },\n  beforeDestroy() {\n    this.provider.disconnect()\n  },\n  methods: {\n    isUnaryTag(node) {\n      return [\n        'area', 'base', 'br', 'col', 'embed', 'hr', 'img',\n        'input', 'keygen', 'link', 'meta', 'param', 'source',\n        'track', 'wbr',\n      ].indexOf(node.tag) > -1\n    },\n    renderTagStart(node) {\n      this.ensureNodeHasAttrs(node)\n      const attrs = Object.keys(node.data.attrs).reduce((carry, name) => {\n        const value = node.data.attrs[name]\n        if (value === '') {\n          return carry + ` ${name}`\n        } else {\n          return carry + ` ${name}=\"${value}\"`\n        }\n      }, '')\n      return `<${node.tag}${attrs}>`\n    },\n    renderTagChildren(node) {\n      return node.children.reduce((html, child) => html + this.renderTag(child), '')\n    },\n    renderTag(node) {\n      if (!node.tag) {\n        return node.text\n      }\n      let html = this.renderTagStart(node)\n      if (node.children) {\n        html += this.renderTagChildren(node)\n      }\n      if (!this.isUnaryTag(node)) {\n        html += `</${node.tag}>`\n      }\n      return html\n    },\n    ensureNodeHasAttrs(node) {\n      node.data = {\n        ...(node.data || {}),\n        attrs: {\n          ...((node.data || {}).attrs || {}),\n        },\n      }\n    },\n    ensureNodeHasInertiaAttribute(node) {\n      this.ensureNodeHasAttrs(node)\n      node.data.attrs['inertia'] = node.data.attrs.inertia || ''\n      return node\n    },\n    renderNode(node) {\n      this.ensureNodeHasInertiaAttribute(node)\n      return this.renderTag(node)\n    },\n    renderNodes(nodes) {\n      const computed = nodes.map(node => this.renderNode(node)).filter(node => node)\n      if (this.title && !computed.find(tag => tag.startsWith('<title'))) {\n        computed.push(`<title inertia>${this.title}</title>`)\n      }\n      return computed\n    },\n  },\n  render() {\n    this.provider.update(\n      this.renderNodes(this.$scopedSlots.default ? this.$scopedSlots.default() : [])\n    )\n  },\n}\n","import { Inertia } from '@inertiajs/inertia'\n\nexport default {\n  created() {\n    if (!this.$options.remember || this.$isServer) {\n      return\n    }\n\n    if (Array.isArray(this.$options.remember)) {\n      this.$options.remember = { data: this.$options.remember }\n    }\n\n    if (typeof this.$options.remember === 'string') {\n      this.$options.remember = { data: [this.$options.remember] }\n    }\n\n    if (typeof this.$options.remember.data === 'string') {\n      this.$options.remember = { data: [this.$options.remember.data] }\n    }\n\n    const rememberKey = this.$options.remember.key instanceof Function\n      ? this.$options.remember.key.call(this)\n      : this.$options.remember.key\n\n    const restored = Inertia.restore(rememberKey)\n\n    const rememberable = this.$options.remember.data.filter(key => {\n      return !(this[key] !== null && typeof this[key] === 'object' && this[key].__rememberable === false)\n    })\n\n    const hasCallbacks = (key) => {\n      return this[key] !== null\n        && typeof this[key] === 'object'\n        && typeof this[key].__remember === 'function'\n        && typeof this[key].__restore === 'function'\n    }\n\n    rememberable.forEach(key => {\n      if (this[key] !== undefined && restored !== undefined && restored[key] !== undefined) {\n        hasCallbacks(key) ? this[key].__restore(restored[key]) : (this[key] = restored[key])\n      }\n\n      this.$watch(key, () => {\n        Inertia.remember(\n          rememberable.reduce((data, key) => ({\n            ...data,\n            [key]: hasCallbacks(key) ? this[key].__remember(): this[key],\n          }), {}),\n          rememberKey,\n        )\n      }, { immediate: true, deep: true })\n    })\n  },\n}\n","import form from './form'\nimport head from './head'\nimport link from './link'\nimport remember from './remember'\nimport { createHeadManager, Inertia } from '@inertiajs/inertia'\n\nlet app = {}\nlet headManager = null\n\nexport default {\n  name: 'Inertia',\n  props: {\n    initialPage: {\n      type: Object,\n      required: true,\n    },\n    resolveComponent: {\n      type: Function,\n      required: true,\n    },\n    onHeadUpdate: {\n      type: Function,\n      required: false,\n      default: () => () => {},\n    },\n  },\n  data() {\n    return {\n      component: this.resolveComponent(this.initialPage.component),\n      page: this.initialPage,\n      key: null,\n    }\n  },\n  created() {\n    app = this\n    headManager = createHeadManager(this.$isServer, this.onHeadUpdate)\n\n    if (!this.$isServer) {\n      Inertia.init({\n        initialPage: this.initialPage,\n        resolveComponent: this.resolveComponent,\n        swapComponent: async ({ component, page, preserveState }) => {\n          this.component = component\n          this.page = page\n          this.key = preserveState ? this.key : Date.now()\n        },\n      })\n    }\n  },\n  render(h) {\n    if (this.component) {\n      const child = h(this.component, {\n        key: this.key,\n        props: this.page.props,\n        scopedSlots: this.$scopedSlots,\n      })\n\n      if (this.component.layout) {\n        if (typeof this.component.layout === 'function') {\n          return this.component.layout(h, child)\n        } else if (Array.isArray(this.component.layout)) {\n          return this.component.layout\n            .concat(child)\n            .reverse()\n            .reduce((child, layout) => h(layout, { props: this.$page.props }, [child]))\n        }\n\n        return h(this.component.layout, { props: this.page.props }, [child])\n      }\n\n      return child\n    }\n  },\n  install(Vue) {\n    console.warn('Registering the Inertia Vue plugin via the \"app\" component has been deprecated. Use the new \"plugin\" named export instead.\\n\\nimport { plugin } from \\'@inertiajs/inertia-vue\\'\\n\\nVue.use(plugin)')\n    plugin.install(Vue)\n  },\n}\n\nexport const plugin = {\n  install(Vue) {\n    Inertia.form = form\n    Vue.mixin(remember)\n    Vue.component('InertiaHead', head)\n    Vue.component('InertiaLink', link)\n\n    Vue.mixin({\n      beforeCreate() {\n        Object.defineProperty(this, '$headManager', {\n          get: function () { return headManager },\n        })\n        Object.defineProperty(this, '$inertia', {\n          get: function () { return Inertia },\n        })\n        Object.defineProperty(this, '$page', {\n          get: function () { return app.page },\n        })\n      },\n    })\n  },\n}\n"],"names":["functional","props","as","type","String","default","data","Object","href","required","method","replace","Boolean","preserveScroll","preserveState","only","Array","headers","render","h","children","on","click","cancelToken","start","progress","finish","cancel","success","error","toLowerCase","mergeDataIntoQueryString","propsData","console","warn","attrs","event","shouldIntercept","preventDefault","Inertia","visit","onCancelToken","onBefore","before","onStart","onProgress","onFinish","onCancel","onSuccess","onError","args","rememberKey","restored","restore","defaults","cloneDeep","recentlySuccessfulTimeoutId","transform","form","Vue","observable","isDirty","errors","hasErrors","processing","wasSuccessful","recentlySuccessful","keys","reduce","carry","key","_this","callback","reset","fields","clonedDefaults","assign","this","length","filter","includes","clearErrors","field","_this2","submit","url","options","_options","token","_this3","clearTimeout","page","_this4","setTimeout","get","post","put","patch","__rememberable","__remember","__restore","created","$watch","newValue","isEqual","remember","immediate","deep","title","provider","$headManager","createProvider","beforeDestroy","disconnect","methods","isUnaryTag","node","indexOf","tag","renderTagStart","ensureNodeHasAttrs","name","value","renderTagChildren","html","child","renderTag","text","ensureNodeHasInertiaAttribute","inertia","renderNode","renderNodes","nodes","computed","map","find","startsWith","push","update","$scopedSlots","$options","$isServer","isArray","Function","call","rememberable","hasCallbacks","forEach","undefined","app","headManager","initialPage","resolveComponent","onHeadUpdate","component","createHeadManager","init","swapComponent","Date","now","scopedSlots","layout","concat","reverse","$page","install","plugin","mixin","head","link","beforeCreate","defineProperty"],"mappings":"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"}